<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Adivinhar o número</title>
    <style>
        html {
            font-family: sans-serif;
        }

        body {
            width: 50%;
            max-width: 800px;
            min-width: 480px;
            margin: 0 auto;
        }

        .ultimoResultado {
            color: white;
            padding: 3px;
        }
    </style>
</head>

<body>
    <h1>Jogo de adivinhar o número</h1>
    <p>Um número de 1 a 100 foi escolhido e você deverá adivinhá-lo em até 10 tentativas. Irei te informar se a
        tentativa está muito abaixo ou acima.</p>
    <div class="form">
        <label for="campoTentativa">Digite sua tentativa:</label>
        <input type="text" id="campoTentativa" class="campoTentativa">
        <input type="submit" value="Enviar tentativa" class="enviarTentativa">
    </div>
    <div class="resultadoParas">
        <p class="tentativas"></p>
        <p class="ultimoResultado"></p>
        <p class="altoOuBaixo"></p>
    </div>

    <script>
        //declaro a variável que guarda o número aleatório
        let numeroAleatorio = Math.floor(Math.random() * 100) + 1;

        //declaro a variável que guarda o primeiro elemento com a classe especificada
        const tentativas = document.querySelector('.tentativas');
        const ultimoResultado = document.querySelector('.ultimoResultado');
        const altoOuBaixo = document.querySelector('.altoOuBaixo');

        const enviarTentativa = document.querySelector('.enviarTentativa')
        const campoTentativa = document.querySelector('.campoTentativa');

        let contadorTentativa = 1;
        let resetarBotao;

        //função que verifica as tentativas
        function verificarTentativas() {
            //variável que guarda o valor digitado
            let valorTentativa = Number(campoTentativa.value);
            //se é 1ª tentativa
            if (contadorTentativa === 1) {
                tentativas.textContent = 'Tentativas anteriores: ';
            }
            //incrementa o texto da tentativa em tentativas anteriores
            tentativas.textContent += valorTentativa + ' ';
            //se acertou o número
            if (valorTentativa === numeroAleatorio) {
                ultimoResultado.textContent = 'Parabéns! Você descobriu o número';
                ultimoResultado.style.backgroundColor = 'green';
                altoOuBaixo.textContent = '';
                defineGameOver();
                //se tentou as 10 tentativas
            } else if (contadorTentativa === 10) {
                ultimoResultado.textContent = 'GAME OVER!';
                defineGameOver();
            } else {
                ultimoResultado.textContent = 'Errou!';
                ultimoResultado.style.backgroundColor = 'red';
                if (valorTentativa < numeroAleatorio) {
                    altoOuBaixo.textContent = 'Última tentativa foi muito baixa.';
                } else if (valorTentativa > numeroAleatorio) {
                    altoOuBaixo.textContent = 'Última tentativa foi muito alta.';
                }
            }
            contadorTentativa++;
            campoTentativa.value = '';
            campoTentativa.focus();
        }
        enviarTentativa.addEventListener('click', verificarTentativas);

        function defineGameOver() {
            campoTentativa.disabled = true;
            enviarTentativa.disabled = true;
            resetarBotao = document.createElement('button');
            resetarBotao.textContent = 'Começar novo jogo';
            document.body.append(resetarBotao);
            resetarBotao.addEventListener('click', resetarJogo);
        }
        function resetarJogo() {
            contadorTentativa = 1;

            const resetaParas = document.querySelectorAll('.resultadoParas p');
            for (let i = 0; i < resetaParas.length; i++) {
                resetaParas[i].textContent = '';

            }
            resetarBotao.parentNode.removeChild(resetarBotao);

            campoTentativa.disabled = false;
            enviarTentativa.disabled = false;
            campoTentativa.value = '';
            campoTentativa.focus();

            ultimoResultado.style.backgroundColor = 'white';

            numeroAleatorio = Math.floor(Math.random() * 100) + 1;
        }
    </script>
</body>

</html>